Описание программы

Данная программа предназначена для сбора данных о парфюмерных товарах с веб-сайта https://goldapple.ru/. Программа извлекает информацию о товарах, такую как название, цена, описание, применение, рейтинг и страна происхождения, и сохраняет полученные данные в файл формата CSV.

Установка и настройка 

Установите необходимые зависимости, используя следующую команду:

    pip install requests beautifulsoup4 tqdm




Скопируйте предоставленный код программы в файл с расширением .py.Раскомментируйте и настройте заголовки headers в коде, если требуется.

Использование
 Запустите программу, запустив файл .py.
Программа будет собирать URL-адреса товаров с веб-сайта https://goldapple.ru/ и сохранять их в файл urls.json. Если у вас уже есть файл urls.json с URL-адресами, закомментируйте строку get_urls(...) и раскомментируйте блок загрузки URL-адресов из файла.

После получения URL-адресов, программа начнет обрабатывать каждый URL-адрес, извлекая информацию о товаре и сохраняя ее в файл perfumes.csv. Процесс обработки будет отображаться с помощью индикатора tqdm.

По окончании выполнения программы, данные будут успешно сохранены в файл perfumes.csv.
1. Введение

Данная программа предназначена для сбора данных о парфюмерии с сайта goldapple.ru. Программа использует библиотеки requests, BeautifulSoup, logging, tqdm и csv.
2. Настройка логгирования

Перед запуском программы необходимо настроить логгирование. Для этого используется библиотека logging. В начале программы необходимо добавить следующий код:

import logging

logging.basicConfig(level=logging.DEBUG, format='%(asctime)s - %(levelname)s - %(message)s')

Это позволит выводить в консоль информацию о ходе выполнения программы, такую как запросы к сайту, найденные идентификаторы продуктов и т.д.
3. Получение URL-адресов продуктов

Для получения URL-адресов продуктов используется функция get_urls. Эта функция принимает три аргумента:

    raw_url: базовый URL-адрес страницы с продуктами
    start: номер первой страницы
    end: номер последней страницы

Функция формирует список URL-адресов страниц с продуктами, начиная с первой страницы и заканчивая последней.
4. Получение данных о продуктах

Для получения данных о продуктах используется функция get_data. Эта функция принимает один аргумент:

    urls: список URL-адресов страниц с продуктами

Функция загружает каждую страницу из списка, парсит ее и извлекает следующую информацию:

    Название продукта
    Цена продукта
    URL-адрес страницы продукта
    Описание продукта
    Применение продукта
    Рейтинг продукта
    Количество отзывов о продукте
    Страна-производитель продукта

Извлеченная информация сохраняется в словаре, который затем добавляется в список.
5. Запись данных в CSV-файл

Для записи данных в CSV-файл используется функция write_to_csv. Эта функция принимает два аргумента:

    data_list: список словарей с данными о продуктах
    csv_file_path: путь к CSV-файлу

Функция открывает CSV-файл в режиме записи, создает заголовок файла и записывает в него данные из списка словарей.
6. Основная функция

Основная функция программы называется main. Эта функция выполняет следующие действия:

    Загружает список URL-адресов страниц с продуктами из файла urls.json
    Создает список для хранения данных о продуктах
    Перебирает список URL-адресов и для каждого URL-адреса вызывает функцию get_data, которая возвращает список словарей с данными о продуктах
    Добавляет данные о продуктах в общий список
    Вызывает функцию write_to_csv, которая записывает данные о продуктах в CSV-файл

7. Запуск программы

Для запуска программы необходимо выполнить следующую команду в командной строке:

python main.py

Программа начнет собирать данные о парфюмерии с сайта goldapple.ru и записывать их в CSV-файл perfumes.csv.

Замечания

При необходимости измените значение переменной start и end в функции get_urls(...), чтобы указать диапазон страниц для сбора URL-адресов товаров.

Если возникают ошибки при обработке URL-адресов или записи данных в CSV-файл, они будут выведены в консоль.

Для обработки ошибки 503, код программы содержит блок try-except, который перехватывает исключение и продолжает выполнение программы с обработкой следующего URL-адреса.

Если вы хотите ограничить количество обрабатываемых URL-адресов, измените значение параметра unique_urls[:5000] в цикле for url in tqdm(...).

Раскомментируйте последнюю строку print(f"Данные успешно записаны в файл {csv_file_path}"), если вы хотите получить сообщение о успешной записи данных в CSV-файл.

Важно

Программа предоставляется "как есть" без каких-либо явных или подразумеваемых гарантий. Автор не несет ответственности за любые прямые или косвенные убытки, связанные с использованием этой программы. Перед использованием программы рекомендуется ознакомиться с правилами использования и политикой конфиденциальности веб-сайта https://goldapple.ru/.
https://disk.yandex.ru/d/MZ7mIJRIOU4zCw
